<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Tienda Ping√ºina üêß</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; background:#f8fafc; margin:0; padding:0; }
    header { background:#2563eb; color:white; padding:1.2rem 2rem; text-align:center; }
    h1 { margin:0; font-weight:600; font-size:1.6rem; }
    main { max-width:1100px; margin:2rem auto; padding:0 1rem; }
    .grid { display:grid; gap:1.5rem; grid-template-columns:repeat(auto-fit,minmax(270px,1fr)); }
    .card { background:white; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.05); padding:1.2rem; display:flex; flex-direction:column; }
    .card img { width:100%; height:180px; object-fit:cover; border-radius:10px; margin-bottom:1rem; }
    .name { font-size:1.1rem; font-weight:600; color:#111827; }
    .desc { color:#4b5563; font-size:.9rem; margin:.4rem 0 1rem; min-height:2.5rem; }
    .price { font-size:1rem; font-weight:700; color:#2563eb; margin-bottom:.6rem; }
    form.checkout { margin-top:1.5rem; display:grid; gap:.8rem; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); align-items:start; }
    .box { background:white; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; }
    label { font-size:.85rem; color:#374151; display:block; margin-bottom:.25rem; }
    input[type="text"], input[type="email"], input[type="number"] { width:100%; border:1px solid #d1d5db; border-radius:6px; padding:.5rem; }
    .submit { grid-column:1 / -1; }
    button { background:#2563eb; color:white; border:none; padding:.75rem 1rem; border-radius:8px; font-weight:600; cursor:pointer; }
    button:hover { background:#1e40af; }
    footer { text-align:center; color:#6b7280; padding:1.2rem 0; font-size:.9rem; }
    a { color:#2563eb; text-decoration:none; }
    a:hover { text-decoration:underline; }
  </style>
</head>
<body>
  <header>
    <h1>Tienda Ping√ºina</h1>
    <p>Los mejores productos del hielo, sin salir del igl√∫.</p>
  </header>

  <main>
    <!-- Un solo formulario para el checkout multi-√≠tem -->
    <form class="checkout" method="POST" action="/checkout">
      <div class="grid" style="grid-column:1 / -1;">
        {{if .Products}}
          {{range .Products}}
            <div class="card">
              <img src="{{$.UploadsBase}}{{.ImagePath}}" alt="{{.Name}}">
              <div>
                <p class="name">{{.Name}}</p>
                <p class="desc">{{.Description}}</p>
                <p class="price">Gs {{.Price}}</p>
              </div>
              <!-- Cantidad por producto: qty_<ObjectID>  -->
              <label for="qty_{{.ID.Hex}}">Cantidad</label>
              <input id="qty_{{.ID.Hex}}" type="number" name="qty_{{.ID.Hex}}" min="0" value="0">
            </div>
          {{end}}
        {{else}}
          <p style="text-align:center; color:#64748b;">No hay productos disponibles todav√≠a.</p>
        {{end}}
      </div>

      <!-- Datos del comprador -->
      <div class="box">
        <label for="buyer_name">Tu nombre</label>
        <input id="buyer_name" type="text" name="buyer_name" required>
      </div>
      <div class="box">
        <label for="address">Direcci√≥n</label>
        <input id="address" type="text" name="address" required>
      </div>
      <div class="box">
        <label for="email">Email</label>
        <input id="email" type="email" name="email" required>
      </div>

      <div class="submit">
        <button type="submit">Hacer pedido</button>
      </div>
    </form>
  </main>

  <footer>
    <p>¬© 2025 Penguin Store ‚Äî Desarrollado por Gaston Duarte</p>
    <a href="/orders">Ver pedidos en curso</a>
  </footer>
</body>
</html>
