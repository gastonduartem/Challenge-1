
//- DASHBOARD ‚Äî pantalla principal del admin
//- Muestra saludo + accesos a Productos y Logout


//- Heredamos layout base (header, estilos)
extends ./layout                               

//- Contenido principal del dashboard
block content
  //- T√≠tulo de bienvenida
  h2(style="margin-bottom: 1rem;") Hola, #{admin_email || 'admin'} üëã

  //- Tarjeta simple con acciones
  div(style="display:flex; gap:1rem; flex-wrap:wrap;")

    //- Acci√≥n: Ir a productos (GET con token en query string)

    //- Pasamos el token por query (sin cookies)
    a(
      href=`/products?token=${token}`         
      style="display:inline-block; background:#0ea5e9; color:white; padding:0.75rem 1rem; border-radius:8px; text-decoration:none;"
      title="Ver y administrar productos"
    ) üõçÔ∏è  Productos


    //- Acci√≥n: Agregar producto directo (GET al form de alta)
    //- (opcional, por comodidad) ‚Äî tambi√©n con token en query

    //- Abre el form de creaci√≥n
    a(
      href=`/products/new?token=${token}`     
      style="display:inline-block; background:#10b981; color:white; padding:0.75rem 1rem; border-radius:8px; text-decoration:none;"
      title="Crear un nuevo producto"
    ) ‚ûï  Nuevo producto


    //- Acci√≥n: Logout (POST-only) ‚Äî con token/CSRF ocultos

    form(
      method="POST"
      action="/logout"
      style="display:inline-block;"
      title="Cerrar sesi√≥n"
    )
      //- En POST mandamos el token como body (sin cookies)
      input(type="hidden" name="token" value=token)
      //- Si hay CSRF habilitado, lo incluimos como hidden
      if csrf_token
        input(type="hidden" name="csrf_token" value=csrf_token)
      //- Bot√≥n de enviar
      button(
        type="submit"
        style="background:#ef4444; color:white; padding:0.75rem 1rem; border-radius:8px; border:none; cursor:pointer;"
      ) ‚èª  Logout

      // Dentro de block content, junto a los otros botones
      a(
        href="http://localhost:8081/orders" 
        target="_blank" 
        style="display:inline-block;padding:.8rem 1.2rem;border-radius:.75rem;background:#6b7280;color:#fff;text-decoration:none;margin-left:1rem"
        ) üìã Pedidos (p√∫blico)


  //- Separador visual
  hr

  //- Texto breve de ayuda
  p(style="color:#64748b;")
    | Consejo: los enlaces GET llevan el token en la URL. Los formularios POST lo env√≠an como campo oculto.

